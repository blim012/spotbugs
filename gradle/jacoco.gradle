apply plugin: "jacoco"

jacoco {
  toolVersion = "0.8.5"
  reportsDir = file("$buildDir/jacocoHtml")
}

jacocoTestReport {
  reports {
    html.enabled = true
    //export
    html.destination file("buildDir/jacocoHtml") //remove buildDir?
  }
}

test {
  jacoco {
    includeNoLocationClasses = true
    // https://github.com/gradle/gradle/issues/5184#issuecomment-391982009
    excludes = ['jdk.internal.*']
  }
}

tasks.test.finalizedBy jacocoTestReport
